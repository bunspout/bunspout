# Node.js test container
FROM node:20-slim

WORKDIR /app

# Copy package files
COPY package.json ./

# Install dependencies (tsx is now in devDependencies)
# Note: Using npm install instead of npm ci since we use bun.lock, not package-lock.json
RUN npm install --ignore-scripts

# Copy source code (using volume mount in docker-compose for hot-reload)
COPY . .

# Default command runs Node.js tests
CMD ["npm", "run", "test:node"]
